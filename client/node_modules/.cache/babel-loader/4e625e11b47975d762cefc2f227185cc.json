{"ast":null,"code":"var _jsxFileName = \"/Users/daylanberry/Desktop/clothing/client/src/components/chat-components/Chat.jsx\";\nimport React from 'react';\nimport './Chat.scss';\nimport { connect } from 'react-redux';\nimport { toggleChatModal } from '../../redux/chat/chat.actions';\nimport { ChatManager, TokenProvider } from '@pusher/chatkit-client';\nimport SendMessage from './SendMessage';\nimport Messages from './Messages';\nimport RoomList from './RoomList';\nimport keys from '../../keys.js';\n\nclass Chat extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.sendMessage = (text, roomId) => {\n      this.currentUser.sendSimpleMessage({\n        text,\n        roomId: this.state.roomId\n      });\n    };\n\n    this.getRooms = () => {\n      this.currentUser.getJoinableRooms().then(joinableRooms => {\n        this.setState({\n          joinableRooms,\n          currentUser: this.currentUser,\n          joinedRooms: this.currentUser.rooms\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.subscribeToRoom = roomId => {\n      this.setState({\n        messages: []\n      });\n      this.currentUser.subscribeToRoom({\n        roomId: roomId,\n        hooks: {\n          onMessage: message => {\n            this.setState({\n              messages: [...this.state.messages, message]\n            });\n          }\n        }\n      }).then(room => {\n        this.setState({\n          roomId: room.id\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.createRoom = roomName => {\n      this.currentUser.createRoom({\n        name: roomName\n      }).then(room => this.subscribeToRoom(room.id)).catch(err => console.log(err));\n    };\n\n    this.state = {\n      messages: [],\n      currentUser: {},\n      joinableRooms: [],\n      joinedRooms: [],\n      roomId: null,\n      userId: ''\n    };\n  }\n\n  componentDidMount() {\n    const chatManager = new ChatManager({\n      instanceLocator: keys.instanceLocator,\n      userId: 'daylan',\n      tokenProvider: new TokenProvider({\n        url: keys.tokenUrl\n      })\n    });\n    chatManager.connect().then(currentUser => {\n      this.currentUser = currentUser;\n      this.getRooms();\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"chat-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"aside\", {\n      className: \"rooms\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(RoomList, {\n      rooms: [...this.state.joinableRooms, ...this.state.joinedRooms],\n      subscribeToRoom: this.subscribeToRoom,\n      roomId: this.state.roomId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })), React.createElement(\"section\", {\n      className: \"texts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"messages\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Messages\")), React.createElement(Messages, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(SendMessage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      onClick: () => this.props.toggleHidden(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\u2715\"), React.createElement(\"button\", {\n      onClick: () => console.log(this.state),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"state\"))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  toggleHidden: () => dispatch(toggleChatModal())\n});\n\nexport default connect(null, mapDispatchToProps)(Chat);","map":{"version":3,"sources":["/Users/daylanberry/Desktop/clothing/client/src/components/chat-components/Chat.jsx"],"names":["React","connect","toggleChatModal","ChatManager","TokenProvider","SendMessage","Messages","RoomList","keys","Chat","Component","constructor","props","sendMessage","text","roomId","currentUser","sendSimpleMessage","state","getRooms","getJoinableRooms","then","joinableRooms","setState","joinedRooms","rooms","catch","err","console","log","subscribeToRoom","messages","hooks","onMessage","message","room","id","createRoom","roomName","name","userId","componentDidMount","chatManager","instanceLocator","tokenProvider","url","tokenUrl","render","toggleHidden","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './Chat.scss'\nimport { connect } from 'react-redux'\nimport { toggleChatModal } from '../../redux/chat/chat.actions'\nimport { ChatManager, TokenProvider} from '@pusher/chatkit-client'\n\nimport SendMessage from './SendMessage'\nimport Messages from './Messages'\nimport RoomList from './RoomList'\n\nimport keys from '../../keys.js'\n\n\nclass Chat extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      messages: [],\n      currentUser: {},\n      joinableRooms: [],\n      joinedRooms: [],\n      roomId: null,\n      userId: ''\n    }\n  }\n\n  componentDidMount() {\n\n    const chatManager = new ChatManager({\n      instanceLocator: keys.instanceLocator,\n      userId: 'daylan',\n      tokenProvider: new TokenProvider({url: keys.tokenUrl})\n    })\n\n    chatManager.connect()\n    .then(currentUser => {\n      this.currentUser = currentUser\n      this.getRooms()\n    })\n    .catch(err => console.log(err))\n  }\n\n\n  sendMessage = (text, roomId) => {\n    this.currentUser.sendSimpleMessage({\n      text,\n      roomId: this.state.roomId,\n    })\n  }\n\n  getRooms = () => {\n  this.currentUser.getJoinableRooms()\n    .then(joinableRooms => {\n      this.setState({\n        joinableRooms,\n        currentUser: this.currentUser,\n        joinedRooms: this.currentUser.rooms\n      })\n    })\n    .catch(err => console.log(err))\n  }\n\n  subscribeToRoom = (roomId) =>{\n    this.setState({messages: []})\n    this.currentUser.subscribeToRoom({\n      roomId: roomId,\n        hooks: {\n          onMessage: message => {\n            this.setState({\n              messages: [...this.state.messages, message]\n            })\n          }\n        }\n    })\n    .then(room => {\n      this.setState({\n        roomId: room.id\n      })\n    })\n    .catch(err => console.log(err))\n\n  }\n\n\n  createRoom = (roomName) => {\n    this.currentUser.createRoom({\n      name: roomName\n    })\n    .then(room => this.subscribeToRoom(room.id))\n    .catch(err => console.log(err))\n  }\n\n\n\n  render() {\n    return (\n      <div className='container'>\n        <div className='chat-container'>\n          <div className='content'>\n            <aside className='rooms'>\n              <RoomList\n                rooms={[...this.state.joinableRooms, ...this.state.joinedRooms]}\n                subscribeToRoom={this.subscribeToRoom}\n                roomId={this.state.roomId}\n              />\n            </aside>\n\n            <section className='texts'>\n              <div className='messages'>\n                <h3>Messages</h3>\n              </div>\n              <Messages />\n              <SendMessage/>\n\n            </section>\n\n            <span onClick={() => this.props.toggleHidden()}>&#10005;</span>\n            <button onClick={() => console.log(this.state)}>state</button>\n          </div>\n\n        </div>\n      </div>\n\n    )\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  toggleHidden: () => dispatch(toggleChatModal())\n})\n\n\nexport default connect(null, mapDispatchToProps)(Chat)"]},"metadata":{},"sourceType":"module"}